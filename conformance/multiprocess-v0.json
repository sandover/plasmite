{
  "conformance_version": 0,
  "name": "multiprocess writers and tail",
  "workdir": "work-multiprocess",
  "steps": [
    {
      "op": "create_pool",
      "pool": "multi",
      "input": {
        "size_bytes": 1048576
      }
    },
    {
      "op": "spawn_poke",
      "pool": "multi",
      "input": {
        "messages": [
          {
            "data": {
              "writer": "alpha",
              "value": 1
            },
            "tags": ["alpha"]
          },
          {
            "data": {
              "writer": "beta",
              "value": 2
            },
            "tags": ["beta"]
          },
          {
            "data": {
              "writer": "gamma",
              "value": 3
            },
            "tags": ["gamma"]
          },
          {
            "data": {
              "writer": "delta",
              "value": 4
            },
            "tags": ["delta"]
          }
        ]
      }
    },
    {
      "op": "tail",
      "pool": "multi",
      "input": {
        "since_seq": 1,
        "max": 4
      },
      "expect": {
        "messages_unordered": [
          {
            "data": {
              "writer": "alpha",
              "value": 1
            },
            "tags": ["alpha"]
          },
          {
            "data": {
              "writer": "beta",
              "value": 2
            },
            "tags": ["beta"]
          },
          {
            "data": {
              "writer": "gamma",
              "value": 3
            },
            "tags": ["gamma"]
          },
          {
            "data": {
              "writer": "delta",
              "value": 4
            },
            "tags": ["delta"]
          }
        ]
      }
    }
  ]
}
