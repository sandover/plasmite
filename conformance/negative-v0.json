{
  "conformance_version": 0,
  "name": "negative-errors",
  "workdir": "work-negative",
  "steps": [
    {
      "op": "get",
      "id": "missing-pool",
      "pool": "missing",
      "input": {
        "seq": 1
      },
      "expect": {
        "error": {
          "kind": "NotFound",
          "message_contains": "not found",
          "has_path": true,
          "has_seq": false
        }
      }
    },
    {
      "op": "create_pool",
      "id": "create",
      "pool": "corrupt",
      "input": {
        "size_bytes": 1048576
      }
    },
    {
      "op": "corrupt_pool_header",
      "id": "corrupt-header",
      "pool": "corrupt"
    },
    {
      "op": "get",
      "id": "corrupt-pool",
      "pool": "corrupt",
      "input": {
        "seq": 1
      },
      "expect": {
        "error": {
          "kind": "Corrupt",
          "has_path": true
        }
      }
    },
    {
      "op": "create_pool",
      "id": "seq-missing-create",
      "pool": "seq-missing",
      "input": {
        "size_bytes": 1048576
      }
    },
    {
      "op": "get",
      "id": "missing-seq",
      "pool": "seq-missing",
      "input": {
        "seq": 42
      },
      "expect": {
        "error": {
          "kind": "NotFound",
          "has_path": false,
          "has_seq": true
        }
      }
    },
    {
      "op": "pool_info",
      "id": "missing-info",
      "pool": "missing-info",
      "expect": {
        "error": {
          "kind": "NotFound",
          "has_path": true
        }
      }
    },
    {
      "op": "delete_pool",
      "id": "missing-delete",
      "pool": "missing-delete",
      "expect": {
        "error": {
          "kind": "NotFound",
          "has_path": true
        }
      }
    },
    {
      "op": "append",
      "id": "invalid-input",
      "pool": "corrupt",
      "input": {
        "data": "not-an-object"
      },
      "expect": {
        "error": {
          "kind": "Corrupt",
          "has_path": true
        }
      }
    }
  ]
}
